<div class="col-sm-6 col-md-4 col-lg-3">
  <div class="card h-100 border-0 shadow-sm">

    <% if product.image.present? %>
      <%= link_to product_path(product) do %>
        <%= image_tag image_path(product.image.url),
            class: "card-img-top",
            style: "height: 220px; object-fit: cover;" %>
      <% end %>
    <% else %>
      <div class="bg-light d-flex align-items-center justify-content-center"
           style="height: 180px;">
        <span class="text-muted">No image</span>
      </div>
    <% end %>

    <div class="card-body d-flex flex-column">
      <h6 class="card-title fw-semibold mb-2">
        <%= product.title %>
      </h6>

      <p class="card-text text-muted small flex-grow-1">
        <%= truncate(product.description, length: 80) %>
      </p>
      
      <p class="card-text text-muted small flex-grow-1">
        <%= product.category.name %>
      </p>

      <div class="mt-3">
        <span class="fw-bold">Â£<%= product.price %></span>
      </div>
    </div>
    

    <% if user_signed_in? %>
      <% if favorited?(product) %>
        <%= button_to "Remove from Favorites",
            product_favorite_path(product), method: :delete,
            data: {turbo: false} %>
      <% else %>
        <%= button_to "Add to Favorites",
            product_favorite_path(product), method: :post,
            data: {turbo: false} %>
      <% end %>
    <% end %>
    
  </div>
</div>
